<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ===== –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò ===== */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Arial', sans-serif;
          line-height: 1.6;
          background: #0f1421;
          color: #ffffff;
          transition: all 0.3s ease;
        }

        /* ===== –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –¢–ï–ú ===== */
        [data-theme="light"] {
          --bg-primary: #ffffff;
          --bg-secondary: #f8f9fa;
          --bg-card: #ffffff;
          --text-primary: #333333;
          --text-secondary: #666666;
          --border-color: #e1e5e9;
          --accent-color: #2962ff;
          --positive-color: #00c853;
          --negative-color: #ff1744;
          --shadow: 0 2px 10px rgba(0,0,0,0.1);
          --shadow-hover: 0 4px 20px rgba(0,0,0,0.15);
        }

        [data-theme="dark"] {
          --bg-primary: #0f1421;
          --bg-secondary: #1a1f2e;
          --bg-card: #1a1f2e;
          --text-primary: #ffffff;
          --text-secondary: #b0b7c3;
          --border-color: #2a2f3e;
          --accent-color: #2962ff;
          --positive-color: #00c853;
          --negative-color: #ff1744;
          --shadow: 0 2px 10px rgba(0,0,0,0.3);
          --shadow-hover: 0 4px 20px rgba(0,0,0,0.4);
        }

        /* ===== –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –¢–ï–ú–´ ===== */
        body {
          background-color: var(--bg-primary);
          color: var(--text-primary);
        }

        /* ===== –ö–û–ù–¢–ï–ô–ù–ï–†–´ ===== */
        .container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 15px;
        }

        /* ===== HEADER ===== */
        .site-header {
          background: var(--bg-secondary);
          border-bottom: 1px solid var(--border-color);
          padding: 15px 0;
          position: sticky;
          top: 0;
          z-index: 1000;
        }

        .header-content {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .logo {
          font-size: 24px;
          font-weight: bold;
          color: var(--accent-color);
        }

        /* ===== –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø ===== */
        .control-panel {
          display: flex;
          align-items: center;
          gap: 20px;
        }

        /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ */
        .lang-switcher {
          display: flex;
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          padding: 4px;
        }

        .lang-btn {
          padding: 6px 12px;
          border: none;
          background: none;
          color: var(--text-secondary);
          cursor: pointer;
          border-radius: 4px;
          transition: all 0.3s ease;
        }

        .lang-btn.active {
          background: var(--accent-color);
          color: white;
        }

        .lang-btn:hover:not(.active) {
          background: var(--bg-secondary);
        }

        /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã */
        .theme-control {
          display: flex;
          align-items: center;
          gap: 10px;
        }

        .theme-label {
          font-size: 14px;
          color: var(--text-secondary);
        }

        .theme-switch {
          position: relative;
          display: inline-block;
          width: 50px;
          height: 24px;
        }

        .theme-switch input {
          opacity: 0;
          width: 0;
          height: 0;
        }

        .theme-slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          transition: .4s;
          border-radius: 24px;
        }

        .theme-slider:before {
          position: absolute;
          content: "";
          height: 16px;
          width: 16px;
          left: 4px;
          bottom: 4px;
          background-color: white;
          transition: .4s;
          border-radius: 50%;
        }

        input:checked + .theme-slider {
          background-color: var(--accent-color);
        }

        input:checked + .theme-slider:before {
          transform: translateX(26px);
        }

        /* ===== –°–ï–ö–¶–ò–Ø –ú–û–ù–ï–¢ ===== */
        .section {
          padding: 30px 0;
        }

        .section-title {
          font-size: 32px;
          text-align: center;
          margin-bottom: 30px;
          color: var(--text-primary);
          position: relative;
        }

        .section-title::after {
          content: '';
          position: absolute;
          bottom: -10px;
          left: 50%;
          transform: translateX(-50%);
          width: 60px;
          height: 3px;
          background: var(--accent-color);
          border-radius: 2px;
        }

        /* ===== FEAR & GREED INDEX ===== */
        .fear-greed-widget {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 16px;
          padding: 25px;
          margin: 20px 0;
          box-shadow: var(--shadow);
          transition: all 0.3s ease;
        }

        .fear-greed-widget:hover {
          box-shadow: var(--shadow-hover);
        }

        .fear-greed-title {
          text-align: center;
          font-size: 24px;
          margin-bottom: 25px;
          color: var(--text-primary);
          font-weight: 600;
        }

        .fear-greed-container {
          display: grid;
          grid-template-columns: 2fr 1fr;
          gap: 30px;
          align-items: start;
        }

        .fear-greed-scale {
          display: flex;
          flex-direction: column;
          gap: 12px;
        }

        .scale-labels {
          display: flex;
          justify-content: space-between;
          font-size: 12px;
          color: var(--text-secondary);
          font-weight: 500;
        }

        .scale-bar {
          position: relative;
          height: 28px;
          background: var(--bg-secondary);
          border-radius: 14px;
          overflow: hidden;
          box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .scale-gradient {
          display: flex;
          height: 100%;
          width: 100%;
        }

        .scale-segment {
          flex: 1;
          height: 100%;
          transition: all 0.3s ease;
        }

        .extreme-fear {
          background: linear-gradient(90deg, #dc2626, #ef4444);
        }

        .fear {
          background: #f59e0b;
        }

        .neutral {
          background: #eab308;
        }

        .greed {
          background: #84cc16;
        }

        .extreme-greed {
          background: linear-gradient(90deg, #16a34a, #22c55e);
        }

        .fear-greed-indicator {
          position: absolute;
          top: -6px;
          transform: translateX(-50%);
          transition: left 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
          z-index: 10;
        }

        .indicator-arrow {
          width: 0;
          height: 0;
          border-left: 8px solid transparent;
          border-right: 8px solid transparent;
          border-bottom: 10px solid var(--accent-color);
          margin: 0 auto;
          filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2));
        }

        .indicator-line {
          width: 3px;
          height: 36px;
          background: var(--accent-color);
          margin: 0 auto;
          border-radius: 2px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .scale-states {
          display: flex;
          justify-content: space-between;
          font-size: 11px;
          color: var(--text-secondary);
          text-align: center;
        }

        .state-label {
          flex: 1;
          padding: 0 5px;
        }

        .fear-greed-info {
          display: flex;
          flex-direction: column;
          gap: 20px;
          padding: 20px;
          background: var(--bg-secondary);
          border-radius: 12px;
          border: 1px solid var(--border-color);
        }

        .current-value, .current-state {
          text-align: center;
        }

        .value-number {
          display: block;
          font-size: 32px;
          font-weight: bold;
          color: var(--accent-color);
          line-height: 1;
        }

        .state-text {
          display: block;
          font-size: 20px;
          font-weight: 600;
          color: var(--text-primary);
          line-height: 1.2;
        }

        .value-label, .state-label {
          display: block;
          font-size: 12px;
          color: var(--text-secondary);
          margin-top: 5px;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .last-update {
          text-align: center;
          padding-top: 15px;
          border-top: 1px solid var(--border-color);
        }

        .update-text {
          font-size: 11px;
          color: var(--text-secondary);
        }

        /* ===== –ü–û–ò–°–ö ===== */
        .search-section {
          margin: 20px 0;
        }

        .search-container {
          max-width: 500px;
          margin: 0 auto;
        }

        .search-wrapper {
          position: relative;
          display: flex;
          align-items: center;
        }

        .search-input {
          width: 100%;
          padding: 16px 50px 16px 20px;
          border: 2px solid var(--border-color);
          border-radius: 25px;
          background: var(--bg-card);
          color: var(--text-primary);
          font-size: 16px;
          font-weight: 500;
          transition: all 0.3s ease;
          outline: none;
        }

        .search-input:focus {
          border-color: var(--accent-color);
          box-shadow: 0 0 0 3px rgba(41, 98, 255, 0.1);
        }

        .search-input::placeholder {
          color: var(--text-secondary);
        }

        .search-icon {
          position: absolute;
          right: 45px;
          top: 50%;
          transform: translateY(-50%);
          color: var(--text-secondary);
          pointer-events: none;
          transition: color 0.3s ease;
        }

        .search-input:focus + .search-icon {
          color: var(--accent-color);
        }

        .search-clear {
          position: absolute;
          right: 15px;
          background: none;
          border: none;
          font-size: 1.5rem;
          color: var(--text-secondary);
          cursor: pointer;
          padding: 4px;
          border-radius: 50%;
          transition: all 0.2s ease;
          display: none;
        }

        .search-clear:hover {
          background: var(--bg-secondary);
          color: var(--text-primary);
        }

        .search-clear.visible {
          display: block;
        }

        /* ===== –ö–ê–†–¢–û–ß–ö–ò –ú–û–ù–ï–¢ –° –ì–†–ê–§–ò–ö–ê–ú–ò ===== */
        .coin-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
        }

        .coin-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 20px;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }

        .coin-card:hover {
          transform: translateY(-5px);
          box-shadow: var(--shadow-hover);
          border-color: var(--accent-color);
        }

        .coin-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(41, 98, 255, 0.1), transparent);
          transition: left 0.5s ease;
        }

        .coin-card:hover::before {
          left: 100%;
        }

        .coin-header {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 15px;
        }

        .coin-icon {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          object-fit: cover;
        }

        .coin-name {
          font-size: 18px;
          font-weight: bold;
          color: var(--text-primary);
        }

        .coin-symbol {
          color: var(--text-secondary);
          text-transform: uppercase;
          font-size: 14px;
        }

        .coin-price {
          font-size: 24px;
          font-weight: bold;
          color: var(--accent-color);
          margin-bottom: 5px;
        }

        .coin-change {
          display: inline-block;
          padding: 6px 10px;
          border-radius: 6px;
          font-size: 14px;
          font-weight: bold;
          margin-bottom: 15px;
        }

        .change-positive {
          background: rgba(0, 200, 83, 0.1);
          color: var(--positive-color);
          border: 1px solid rgba(0, 200, 83, 0.2);
        }

        .change-negative {
          background: rgba(255, 23, 68, 0.1);
          color: var(--negative-color);
          border: 1px solid rgba(255, 23, 68, 0.2);
        }

        /* –ì—Ä–∞—Ñ–∏–∫ –¥–ª—è –º–æ–Ω–µ—Ç—ã */
        .coin-chart-container {
          height: 80px;
          margin: 15px 0;
          position: relative;
        }

        .coin-chart {
          width: 100%;
          height: 100%;
        }

        .coin-actions {
          display: flex;
          gap: 10px;
        }

        .action-btn {
          flex: 1;
          padding: 10px 12px;
          text-align: center;
          background: var(--accent-color);
          color: white;
          text-decoration: none;
          border-radius: 8px;
          font-size: 14px;
          transition: all 0.3s ease;
          border: none;
          cursor: pointer;
          font-weight: 500;
        }

        .action-btn:hover {
          background: #1e40af;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(41, 98, 255, 0.3);
        }

        /* ===== –ü–ê–ì–ò–ù–ê–¶–ò–Ø ===== */
        .pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 15px;
          margin-top: 30px;
        }

        .page-btn {
          padding: 12px 20px;
          border: 2px solid var(--accent-color);
          background: var(--accent-color);
          color: white;
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.3s ease;
          font-weight: 500;
        }

        .page-btn:hover:not(.disabled) {
          background: #1e40af;
          border-color: #1e40af;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(41, 98, 255, 0.3);
        }

        .page-btn.disabled {
          background: #9ca3af;
          border-color: #9ca3af;
          cursor: not-allowed;
          transform: none;
          box-shadow: none;
          opacity: 0.6;
        }

        .page-info {
          color: var(--text-secondary);
          font-weight: 500;
          font-size: 16px;
        }

        /* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ===== */
        @media (max-width: 768px) {
          .header-content {
            flex-direction: column;
            gap: 15px;
          }
          
          .coin-grid {
            grid-template-columns: 1fr;
          }
          
          .section {
            padding: 20px 0;
          }
          
          .fear-greed-container {
            grid-template-columns: 1fr;
            gap: 20px;
          }
          
          .fear-greed-info {
            order: -1;
          }
          
          .search-input {
            font-size: 14px;
            padding: 12px 40px 12px 12px;
          }
          
          .pagination {
            flex-direction: column;
            gap: 10px;
          }
        }
    </style>
</head>
<body data-theme="dark">
    <!-- HEADER -->
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="logo" id="siteLogo">CryptoDrom</div>
                <div class="control-panel">
                    <div class="lang-switcher">
                        <button class="lang-btn active" data-lang="ru">RU</button>
                        <button class="lang-btn" data-lang="en">EN</button>
                    </div>
                    <div class="theme-control">
                        <span class="theme-label" id="themeText">–¢—ë–º–Ω–∞—è</span>
                        <label class="theme-switch">
                            <input type="checkbox" id="themeToggle" checked>
                            <span class="theme-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- –°–ï–ö–¶–ò–Ø –ú–û–ù–ï–¢ -->
    <section class="section coins-section" id="coinsSection">
        <div class="container">
            <h2 class="section-title" id="coinsTitle">–¢–æ–ø –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç</h2>

            <!-- Fear & Greed Index -->
            <div class="fear-greed-widget">
                <h3 class="fear-greed-title">–ò–Ω–¥–µ–∫—Å –°—Ç—Ä–∞—Ö–∞ –∏ –ñ–∞–¥–Ω–æ—Å—Ç–∏</h3>
                <div class="fear-greed-container">
                    <div class="fear-greed-scale">
                        <div class="scale-labels">
                            <span>0</span><span>25</span><span>50</span><span>75</span><span>100</span>
                        </div>
                        <div class="scale-bar">
                            <div class="scale-gradient">
                                <div class="scale-segment extreme-fear"></div>
                                <div class="scale-segment fear"></div>
                                <div class="scale-segment neutral"></div>
                                <div class="scale-segment greed"></div>
                                <div class="scale-segment extreme-greed"></div>
                            </div>
                            <div class="fear-greed-indicator" id="fearGreedIndicator">
                                <div class="indicator-arrow"></div>
                                <div class="indicator-line"></div>
                            </div>
                        </div>
                        <div class="scale-states">
                            <span class="state-label">–ö—Ä–∞–π–Ω–∏–π —Å—Ç—Ä–∞—Ö</span>
                            <span class="state-label">–°—Ç—Ä–∞—Ö</span>
                            <span class="state-label">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ</span>
                            <span class="state-label">–ñ–∞–¥–Ω–æ—Å—Ç—å</span>
                            <span class="state-label">–ö—Ä–∞–π–Ω—è—è –∂–∞–¥–Ω–æ—Å—Ç—å</span>
                        </div>
                    </div>
                    <div class="fear-greed-info">
                        <div class="current-value">
                            <span class="value-number" id="fearGreedValue">75</span>
                            <span class="value-label">–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</span>
                        </div>
                        <div class="current-state">
                            <span class="state-text" id="fearGreedText">–ñ–∞–¥–Ω–æ—Å—Ç—å</span>
                            <span class="state-label">–°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä—ã–Ω–∫–∞</span>
                        </div>
                        <div class="last-update">
                            <span class="update-text" id="lastUpdate">–û–±–Ω–æ–≤–ª–µ–Ω–æ: —Ç–æ–ª—å–∫–æ —á—Ç–æ</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–∏—Å–∫ -->
            <div class="search-section">
                <div class="search-container">
                    <div class="search-wrapper">
                        <input type="text" class="search-input" id="mainSearch" placeholder="–ü–æ–∏—Å–∫ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç...">
                        <div class="search-icon">üîç</div>
                        <button class="search-clear" id="searchClear">√ó</button>
                    </div>
                </div>
            </div>

            <!-- –°–µ—Ç–∫–∞ –º–æ–Ω–µ—Ç -->
            <div class="coin-grid" id="coinGrid">
                <!-- –ú–æ–Ω–µ—Ç—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>

            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <div class="pagination">
                <button class="page-btn disabled" id="prevPage">‚Üê –ù–∞–∑–∞–¥</button>
                <span class="page-info" id="pageInfo">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</span>
                <button class="page-btn" id="nextPage">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
            </div>
        </div>
    </section>

    <script>
        // ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø =====
        const CONFIG = {
          coinsPerPage: 20,
          currentPage: 1,
          currentLang: 'ru',
          currentTheme: 'dark'
        };

        // ===== –î–ê–ù–ù–´–ï –î–õ–Ø –ü–û–ò–°–ö–ê =====
        let allCoinsCache = [];

        // ===== –ü–ï–†–ï–í–û–î–´ =====
        const TRANSLATIONS = {
          ru: {
            siteLogo: 'CryptoDrom',
            themeText: '–¢—ë–º–Ω–∞—è',
            coinsTitle: '–¢–æ–ø –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç',
            searchPlaceholder: '–ü–æ–∏—Å–∫ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç...',
            fearGreedTitle: '–ò–Ω–¥–µ–∫—Å –°—Ç—Ä–∞—Ö–∞ –∏ –ñ–∞–¥–Ω–æ—Å—Ç–∏',
            page: '–°—Ç—Ä–∞–Ω–∏—Ü–∞',
            tradingView: 'TradingView',
            details: '–î–µ—Ç–∞–ª–∏'
          },
          en: {
            siteLogo: 'CryptoDrom',
            themeText: 'Dark',
            coinsTitle: 'Top Cryptocurrencies',
            searchPlaceholder: 'Search cryptocurrencies...',
            fearGreedTitle: 'Fear & Greed Index',
            page: 'Page',
            tradingView: 'TradingView',
            details: 'Details'
          }
        };

        // ===== –¢–ï–°–¢–û–í–´–ï –î–ê–ù–ù–´–ï –° –ì–†–ê–§–ò–ö–ê–ú–ò =====
        const TEST_COINS = [
          {
            id: "bitcoin",
            name: "Bitcoin",
            symbol: "btc",
            image: "https://assets.coingecko.com/coins/images/1/small/bitcoin.png",
            current_price: 58728.42,
            price_change_percentage_24h: 2.5,
            sparkline_in_7d: {
                price: [56000, 56500, 56200, 56800, 57200, 57500, 57800, 58200, 58500, 58728]
            }
          },
          {
            id: "ethereum", 
            name: "Ethereum",
            symbol: "eth",
            image: "https://assets.coingecko.com/coins/images/279/small/ethereum.png",
            current_price: 2935.51,
            price_change_percentage_24h: -1.2,
            sparkline_in_7d: {
                price: [3000, 2980, 2970, 2950, 2940, 2930, 2920, 2935, 2940, 2935]
            }
          },
          {
            id: "tether",
            name: "Tether",
            symbol: "usdt",
            image: "https://assets.coingecko.com/coins/images/325/small/Tether.png",
            current_price: 1.00,
            price_change_percentage_24h: 0.0,
            sparkline_in_7d: {
                price: [1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00]
            }
          },
          {
            id: "ripple",
            name: "XRP",
            symbol: "xrp",
            image: "https://assets.coingecko.com/coins/images/44/small/xrp-symbol-white-128.png",
            current_price: 0.52,
            price_change_percentage_24h: 0.39,
            sparkline_in_7d: {
                price: [0.50, 0.51, 0.52, 0.51, 0.52, 0.53, 0.52, 0.51, 0.52, 0.52]
            }
          }
        ];

        // ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ì–†–ê–§–ò–ö–û–í =====
        function createSparklineChart(canvasId, data, isPositive) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const gradient = ctx.createLinearGradient(0, 0, 0, 80);
            
            if (isPositive) {
                gradient.addColorStop(0, 'rgba(0, 200, 83, 0.3)');
                gradient.addColorStop(1, 'rgba(0, 200, 83, 0.0)');
            } else {
                gradient.addColorStop(0, 'rgba(255, 23, 68, 0.3)');
                gradient.addColorStop(1, 'rgba(255, 23, 68, 0.0)');
            }

            return new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map((_, i) => i),
                    datasets: [{
                        data: data,
                        borderColor: isPositive ? '#00c853' : '#ff1744',
                        backgroundColor: gradient,
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: false
                        }
                    },
                    scales: {
                        x: {
                            display: false
                        },
                        y: {
                            display: false
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        function generateMockSparklineData(currentPrice, changePercent, points = 10) {
            const data = [currentPrice];
            let lastPrice = currentPrice;
            const volatility = Math.abs(changePercent) / 100;
            
            for (let i = 1; i < points; i++) {
                // –°–æ–∑–¥–∞–µ–º —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è —Ü–µ–Ω—ã
                const randomChange = (Math.random() - 0.5) * volatility * currentPrice;
                lastPrice = Math.max(lastPrice + randomChange, currentPrice * 0.9); // –ú–∏–Ω–∏–º—É–º 90% –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
                data.unshift(lastPrice);
            }
            
            return data;
        }

        // ===== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò =====
        function renderCoins(coins) {
            const coinGrid = document.getElementById('coinGrid');
            if (!coinGrid) return;

            const t = TRANSLATIONS[CONFIG.currentLang];
            
            coinGrid.innerHTML = coins.map((coin, index) => {
                const change = coin.price_change_percentage_24h || 0;
                const changeClass = change >= 0 ? 'change-positive' : 'change-negative';
                const changeSymbol = change >= 0 ? '+' : '';
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
                const chartData = coin.sparkline_in_7d ? 
                    coin.sparkline_in_7d.price.slice(-10) : // –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Ç–æ—á–µ–∫
                    generateMockSparklineData(coin.current_price, change);

                return `
                    <div class="coin-card" data-coin-id="${coin.id}">
                        <div class="coin-header">
                            <img src="${coin.image}" alt="${coin.name}" class="coin-icon" onerror="this.src='https://via.placeholder.com/40/2962ff/ffffff?text=?'">
                            <div>
                                <div class="coin-name">${coin.name}</div>
                                <div class="coin-symbol">${coin.symbol.toUpperCase()}</div>
                            </div>
                        </div>
                        <div class="coin-price">$${coin.current_price.toLocaleString()}</div>
                        <div class="coin-change ${changeClass}">
                            ${changeSymbol}${change.toFixed(2)}%
                        </div>
                        
                        <!-- –ì—Ä–∞—Ñ–∏–∫ -->
                        <div class="coin-chart-container">
                            <canvas class="coin-chart" id="chart-${coin.id}"></canvas>
                        </div>
                        
                        <div class="coin-actions">
                            <a href="https://www.tradingview.com/symbols/${coin.symbol.toUpperCase()}USD/" target="_blank" class="action-btn">${t.tradingView}</a>
                            <a href="https://www.coingecko.com/en/coins/${coin.id}" target="_blank" class="action-btn">${t.details}</a>
                        </div>
                    </div>
                `;
            }).join('');

            // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
            setTimeout(() => {
                coins.forEach((coin, index) => {
                    const change = coin.price_change_percentage_24h || 0;
                    const chartData = coin.sparkline_in_7d ? 
                        coin.sparkline_in_7d.price.slice(-10) :
                        generateMockSparklineData(coin.current_price, change);
                    
                    createSparklineChart(`chart-${coin.id}`, chartData, change >= 0);
                });
            }, 100);
        }

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        function loadCoins() {
            const coinGrid = document.getElementById('coinGrid');
            if (!coinGrid) return;

            allCoinsCache = TEST_COINS;
            renderCoins(TEST_COINS);
        }

        function initApp() {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
            loadCoins();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Fear & Greed
            const indicator = document.getElementById('fearGreedIndicator');
            if (indicator) indicator.style.left = '75%';
            
            console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ!');
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
